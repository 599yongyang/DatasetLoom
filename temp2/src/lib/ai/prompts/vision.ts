export const IMAGE_ANALYSIS_PROMPT = `请分析图像内容并完成以下任务：

如果图中是自然图像，请提取主要实体对象（如动物、物品等），使用简体中文命名。
如果图中包含文字，请完整提取并返回文字内容。
如果图像中既无实体也无文字，请返回空数组。
输出格式要求：

返回一个标准的 JSON 对象，包含两个字段：
"entities"：字符串数组，表示图像中的实体对象，如 ["猫", "狗"]
"text"：字符串，表示图像中识别出的文字内容，如果没有则为空字符串 ""
示例输出格式如下：{
  "entities": ["猫", "狗"],
  "text": "这是一段示例文字"
} `;

export function genImageQuestionPrompt(prompt: string, block: string) {
    return `
    ${prompt}
    
 【可用标注区域】：
${JSON.stringify(block, null, 2)}


【生成要求】：
1. 可以引用区域生成问题，也可以不引用区域生成问题，如果引用区域必须使用 @[标签名](id) 格式引用区域
2. 包含位置、关系和特征三类问题
3. 返回字符串数组

【输出要求】
\`\`\`json
["问题1","问题2"]
\`\`\`
  
【输出示例】["这个区域 @[区域A](0vLhjN1o20A6FpVeUMc31) 在图像中的具体位置是什么？", "@[区域B](4BGKxhgjv5BmpexDmcl8y) 与其他区域的关系是什么？"]
    `;
}

export function genImageAnswerPrompt(question: string, block: string, language: string = 'zh-CN') {
    return `
# 图像分析指令
## 系统角色
你是一个专业的视觉分析助手，能够通过结构化坐标数据解读图像。请遵循以下规则：
1. 严格根据提供的坐标数据进行分析
2. 优先使用区域标签(label)进行描述
3. 保持回答的客观性和准确性

## 输入说明
### 问题内容
${question}

### 坐标信息
${block}

### 格式说明
1. 标准格式: [x,y,w,h] 或 [x:100,y:200,w:50,h:80]
2. 每个区域包含:
   - 坐标位置 (x,y)
   - 尺寸 (w,h)
   - 标签 (label)

## 分析流程
1. 坐标解析 → 2. 空间关系计算 → 3. 逻辑推理 → 4. 结果验证 

## 示例
### 输入问题
"[x:513 y:335 w:398 h:716] 和 [x:0 y:691 w:600 h:300] 是一个种类嘛？"

### 坐标输入
[
    {"x":252,"y":517.5,"width":583,"height":80,"label":"区域A"},
    {"x":90,"y":620.5,"width":844,"height":76,"label":"区域B"}
]
### 期望输出
{
  "answer": "是的【区域A】位于【区域B】都属于猫类，一个在躺着，一个在站着。",
  "evidence": [
    {
      "text": "",
      "location": ""
    }
  ],
  "confidence": 0.9
}

## 特殊处理
1. 模糊问题：要求用户澄清具体比较的维度（水平/垂直/重叠面积）
2. 无效坐标：自动转换为全局分析模式
3. 缺失标签：使用"区域1"、"区域2"作为默认命名

## 输出要求
\`\`\`json
{
  "answer": "直接回答问题的内容",
  "evidence": [{
    "text": "支持答案的原文位置",
    "location": "具体位置"
  }],
  "confidence": 0.0-1.0
}

**重要**：仅输出符合JSON Schema的结果，不添加解释文字。
\`\`\`



`;
}
